function Xn(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Kn(i){var t={exports:{}};return i(t,t.exports),t.exports}var jn=Kn(function(i){var t={};function h(r){return r.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}i.exports=t,t.eastAsianWidth=function(r){var a=r.charCodeAt(0),u=r.length==2?r.charCodeAt(1):0,n=a;return 55296<=a&&a<=56319&&56320<=u&&u<=57343&&(n=(a&=1023)<<10|(u&=1023),n+=65536),n==12288||65281<=n&&n<=65376||65504<=n&&n<=65510?"F":n==8361||65377<=n&&n<=65470||65474<=n&&n<=65479||65482<=n&&n<=65487||65490<=n&&n<=65495||65498<=n&&n<=65500||65512<=n&&n<=65518?"H":4352<=n&&n<=4447||4515<=n&&n<=4519||4602<=n&&n<=4607||9001<=n&&n<=9002||11904<=n&&n<=11929||11931<=n&&n<=12019||12032<=n&&n<=12245||12272<=n&&n<=12283||12289<=n&&n<=12350||12353<=n&&n<=12438||12441<=n&&n<=12543||12549<=n&&n<=12589||12593<=n&&n<=12686||12688<=n&&n<=12730||12736<=n&&n<=12771||12784<=n&&n<=12830||12832<=n&&n<=12871||12880<=n&&n<=13054||13056<=n&&n<=19903||19968<=n&&n<=42124||42128<=n&&n<=42182||43360<=n&&n<=43388||44032<=n&&n<=55203||55216<=n&&n<=55238||55243<=n&&n<=55291||63744<=n&&n<=64255||65040<=n&&n<=65049||65072<=n&&n<=65106||65108<=n&&n<=65126||65128<=n&&n<=65131||110592<=n&&n<=110593||127488<=n&&n<=127490||127504<=n&&n<=127546||127552<=n&&n<=127560||127568<=n&&n<=127569||131072<=n&&n<=194367||177984<=n&&n<=196605||196608<=n&&n<=262141?"W":32<=n&&n<=126||162<=n&&n<=163||165<=n&&n<=166||n==172||n==175||10214<=n&&n<=10221||10629<=n&&n<=10630?"Na":n==161||n==164||167<=n&&n<=168||n==170||173<=n&&n<=174||176<=n&&n<=180||182<=n&&n<=186||188<=n&&n<=191||n==198||n==208||215<=n&&n<=216||222<=n&&n<=225||n==230||232<=n&&n<=234||236<=n&&n<=237||n==240||242<=n&&n<=243||247<=n&&n<=250||n==252||n==254||n==257||n==273||n==275||n==283||294<=n&&n<=295||n==299||305<=n&&n<=307||n==312||319<=n&&n<=322||n==324||328<=n&&n<=331||n==333||338<=n&&n<=339||358<=n&&n<=359||n==363||n==462||n==464||n==466||n==468||n==470||n==472||n==474||n==476||n==593||n==609||n==708||n==711||713<=n&&n<=715||n==717||n==720||728<=n&&n<=731||n==733||n==735||768<=n&&n<=879||913<=n&&n<=929||931<=n&&n<=937||945<=n&&n<=961||963<=n&&n<=969||n==1025||1040<=n&&n<=1103||n==1105||n==8208||8211<=n&&n<=8214||8216<=n&&n<=8217||8220<=n&&n<=8221||8224<=n&&n<=8226||8228<=n&&n<=8231||n==8240||8242<=n&&n<=8243||n==8245||n==8251||n==8254||n==8308||n==8319||8321<=n&&n<=8324||n==8364||n==8451||n==8453||n==8457||n==8467||n==8470||8481<=n&&n<=8482||n==8486||n==8491||8531<=n&&n<=8532||8539<=n&&n<=8542||8544<=n&&n<=8555||8560<=n&&n<=8569||n==8585||8592<=n&&n<=8601||8632<=n&&n<=8633||n==8658||n==8660||n==8679||n==8704||8706<=n&&n<=8707||8711<=n&&n<=8712||n==8715||n==8719||n==8721||n==8725||n==8730||8733<=n&&n<=8736||n==8739||n==8741||8743<=n&&n<=8748||n==8750||8756<=n&&n<=8759||8764<=n&&n<=8765||n==8776||n==8780||n==8786||8800<=n&&n<=8801||8804<=n&&n<=8807||8810<=n&&n<=8811||8814<=n&&n<=8815||8834<=n&&n<=8835||8838<=n&&n<=8839||n==8853||n==8857||n==8869||n==8895||n==8978||9312<=n&&n<=9449||9451<=n&&n<=9547||9552<=n&&n<=9587||9600<=n&&n<=9615||9618<=n&&n<=9621||9632<=n&&n<=9633||9635<=n&&n<=9641||9650<=n&&n<=9651||9654<=n&&n<=9655||9660<=n&&n<=9661||9664<=n&&n<=9665||9670<=n&&n<=9672||n==9675||9678<=n&&n<=9681||9698<=n&&n<=9701||n==9711||9733<=n&&n<=9734||n==9737||9742<=n&&n<=9743||9748<=n&&n<=9749||n==9756||n==9758||n==9792||n==9794||9824<=n&&n<=9825||9827<=n&&n<=9829||9831<=n&&n<=9834||9836<=n&&n<=9837||n==9839||9886<=n&&n<=9887||9918<=n&&n<=9919||9924<=n&&n<=9933||9935<=n&&n<=9953||n==9955||9960<=n&&n<=9983||n==10045||n==10071||10102<=n&&n<=10111||11093<=n&&n<=11097||12872<=n&&n<=12879||57344<=n&&n<=63743||65024<=n&&n<=65039||n==65533||127232<=n&&n<=127242||127248<=n&&n<=127277||127280<=n&&n<=127337||127344<=n&&n<=127386||917760<=n&&n<=917999||983040<=n&&n<=1048573||1048576<=n&&n<=1114109?"A":"N"},t.characterLength=function(r){var a=this.eastAsianWidth(r);return a=="F"||a=="W"||a=="A"?2:1},t.length=function(r){for(var a=h(r),u=0,n=0;n<a.length;n++)u+=this.characterLength(a[n]);return u},t.slice=function(r,a,u){textLen=t.length(r),u=u||1,(a=a||0)<0&&(a=textLen+a),u<0&&(u=textLen+u);for(var n="",o=0,e=h(r),s=0;s<e.length;s++){var c=e[s],f=t.length(c);if(o>=a-(f==2?1:0)){if(!(o+f<=u))break;n+=c}o+=f}return n}}),nt=Kn(function(i,t){(function(h){var r=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:.5*(Math.exp(e)+Math.exp(-e))},a=Math.sinh||function(e){return Math.abs(e)<1e-9?e:.5*(Math.exp(e)-Math.exp(-e))},u=function(){throw SyntaxError("Invalid Param")};function n(e,s){var c=Math.abs(e),f=Math.abs(s);return e===0?Math.log(f):s===0?Math.log(c):c<3e3&&f<3e3?.5*Math.log(e*e+s*s):(e/=2,s/=2,.5*Math.log(e*e+s*s)+Math.LN2)}function o(e,s){if(!(this instanceof o))return new o(e,s);var c=function(f,l){var m={re:0,im:0};if(f==null)m.re=m.im=0;else if(l!==void 0)m.re=f,m.im=l;else switch(typeof f){case"object":if("im"in f&&"re"in f)m.re=f.re,m.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return o.INFINITY;m.re=f.abs*Math.cos(f.arg),m.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return o.INFINITY;m.re=f.r*Math.cos(f.phi),m.im=f.r*Math.sin(f.phi)}else f.length===2?(m.re=f[0],m.im=f[1]):u();break;case"string":m.im=m.re=0;var v=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),O=1,_=0;v===null&&u();for(var S=0;S<v.length;S++){var E=v[S];E===" "||E==="	"||E===`
`||(E==="+"?O++:E==="-"?_++:E==="i"||E==="I"?(O+_===0&&u(),v[S+1]===" "||isNaN(v[S+1])?m.im+=parseFloat((_%2?"-":"")+"1"):(m.im+=parseFloat((_%2?"-":"")+v[S+1]),S++),O=_=0):((O+_===0||isNaN(E))&&u(),v[S+1]==="i"||v[S+1]==="I"?(m.im+=parseFloat((_%2?"-":"")+E),S++):m.re+=parseFloat((_%2?"-":"")+E),O=_=0))}O+_>0&&u();break;case"number":m.im=0,m.re=f;break;default:u()}return m}(e,s);this.re=c.re,this.im=c.im}o.prototype={re:0,im:0,sign:function(){var e=this.abs();return new o(this.re/e,this.im/e)},add:function(e,s){var c=new o(e,s);return this.isInfinite()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:new o(this.re+c.re,this.im+c.im)},sub:function(e,s){var c=new o(e,s);return this.isInfinite()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:new o(this.re-c.re,this.im-c.im)},mul:function(e,s){var c=new o(e,s);return this.isInfinite()&&c.isZero()||this.isZero()&&c.isInfinite()?o.NAN:this.isInfinite()||c.isInfinite()?o.INFINITY:c.im===0&&this.im===0?new o(this.re*c.re,0):new o(this.re*c.re-this.im*c.im,this.re*c.im+this.im*c.re)},div:function(e,s){var c=new o(e,s);if(this.isZero()&&c.isZero()||this.isInfinite()&&c.isInfinite())return o.NAN;if(this.isInfinite()||c.isZero())return o.INFINITY;if(this.isZero()||c.isInfinite())return o.ZERO;e=this.re,s=this.im;var f,l,m=c.re,v=c.im;return v===0?new o(e/m,s/m):Math.abs(m)<Math.abs(v)?new o((e*(l=m/v)+s)/(f=m*l+v),(s*l-e)/f):new o((e+s*(l=v/m))/(f=v*l+m),(s-e*l)/f)},pow:function(e,s){var c=new o(e,s);if(e=this.re,s=this.im,c.isZero())return o.ONE;if(c.im===0){if(s===0&&e>0)return new o(Math.pow(e,c.re),0);if(e===0)switch((c.re%4+4)%4){case 0:return new o(Math.pow(s,c.re),0);case 1:return new o(0,Math.pow(s,c.re));case 2:return new o(-Math.pow(s,c.re),0);case 3:return new o(0,-Math.pow(s,c.re))}}if(e===0&&s===0&&c.re>0&&c.im>=0)return o.ZERO;var f=Math.atan2(s,e),l=n(e,s);return e=Math.exp(c.re*l-c.im*f),s=c.im*l+c.re*f,new o(e*Math.cos(s),e*Math.sin(s))},sqrt:function(){var e,s,c=this.re,f=this.im,l=this.abs();if(c>=0){if(f===0)return new o(Math.sqrt(c),0);e=.5*Math.sqrt(2*(l+c))}else e=Math.abs(f)/Math.sqrt(2*(l-c));return s=c<=0?.5*Math.sqrt(2*(l-c)):Math.abs(f)/Math.sqrt(2*(l+c)),new o(e,f<0?-s:s)},exp:function(){var e=Math.exp(this.re);return new o(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,s=this.im;return new o(Math.expm1(e)*Math.cos(s)+function(c){var f=Math.PI/4;if(-f>c||c>f)return Math.cos(c)-1;var l=c*c;return l*(l*(l*(l*(l*(l*(l*(l/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(s),Math.exp(e)*Math.sin(s))},log:function(){var e=this.re,s=this.im;return new o(n(e,s),Math.atan2(s,e))},abs:function(){return e=this.re,s=this.im,c=Math.abs(e),f=Math.abs(s),c<3e3&&f<3e3?Math.sqrt(c*c+f*f):(c<f?(c=f,f=e/s):f=s/e,c*Math.sqrt(1+f*f));var e,s,c,f},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,s=this.im;return new o(Math.sin(e)*r(s),Math.cos(e)*a(s))},cos:function(){var e=this.re,s=this.im;return new o(Math.cos(e)*r(s),-Math.sin(e)*a(s))},tan:function(){var e=2*this.re,s=2*this.im,c=Math.cos(e)+r(s);return new o(Math.sin(e)/c,a(s)/c)},cot:function(){var e=2*this.re,s=2*this.im,c=Math.cos(e)-r(s);return new o(-Math.sin(e)/c,a(s)/c)},sec:function(){var e=this.re,s=this.im,c=.5*r(2*s)+.5*Math.cos(2*e);return new o(Math.cos(e)*r(s)/c,Math.sin(e)*a(s)/c)},csc:function(){var e=this.re,s=this.im,c=.5*r(2*s)-.5*Math.cos(2*e);return new o(Math.sin(e)*r(s)/c,-Math.cos(e)*a(s)/c)},asin:function(){var e=this.re,s=this.im,c=new o(s*s-e*e+1,-2*e*s).sqrt(),f=new o(c.re-s,c.im+e).log();return new o(f.im,-f.re)},acos:function(){var e=this.re,s=this.im,c=new o(s*s-e*e+1,-2*e*s).sqrt(),f=new o(c.re-s,c.im+e).log();return new o(Math.PI/2-f.im,f.re)},atan:function(){var e=this.re,s=this.im;if(e===0){if(s===1)return new o(0,1/0);if(s===-1)return new o(0,-1/0)}var c=e*e+(1-s)*(1-s),f=new o((1-s*s-e*e)/c,-2*e/c).log();return new o(-.5*f.im,.5*f.re)},acot:function(){var e=this.re,s=this.im;if(s===0)return new o(Math.atan2(1,e),0);var c=e*e+s*s;return c!==0?new o(e/c,-s/c).atan():new o(e!==0?e/0:0,s!==0?-s/0:0).atan()},asec:function(){var e=this.re,s=this.im;if(e===0&&s===0)return new o(0,1/0);var c=e*e+s*s;return c!==0?new o(e/c,-s/c).acos():new o(e!==0?e/0:0,s!==0?-s/0:0).acos()},acsc:function(){var e=this.re,s=this.im;if(e===0&&s===0)return new o(Math.PI/2,1/0);var c=e*e+s*s;return c!==0?new o(e/c,-s/c).asin():new o(e!==0?e/0:0,s!==0?-s/0:0).asin()},sinh:function(){var e=this.re,s=this.im;return new o(a(e)*Math.cos(s),r(e)*Math.sin(s))},cosh:function(){var e=this.re,s=this.im;return new o(r(e)*Math.cos(s),a(e)*Math.sin(s))},tanh:function(){var e=2*this.re,s=2*this.im,c=r(e)+Math.cos(s);return new o(a(e)/c,Math.sin(s)/c)},coth:function(){var e=2*this.re,s=2*this.im,c=r(e)-Math.cos(s);return new o(a(e)/c,-Math.sin(s)/c)},csch:function(){var e=this.re,s=this.im,c=Math.cos(2*s)-r(2*e);return new o(-2*a(e)*Math.cos(s)/c,2*r(e)*Math.sin(s)/c)},sech:function(){var e=this.re,s=this.im,c=Math.cos(2*s)+r(2*e);return new o(2*r(e)*Math.cos(s)/c,-2*a(e)*Math.sin(s)/c)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var s=this.asin();return this.re=-this.im,this.im=e,e=s.re,s.re=-s.im,s.im=e,s},acosh:function(){var e=this.acos();if(e.im<=0){var s=e.re;e.re=-e.im,e.im=s}else s=e.im,e.im=-e.re,e.re=s;return e},atanh:function(){var e=this.re,s=this.im,c=e>1&&s===0,f=1-e,l=1+e,m=f*f+s*s,v=m!==0?new o((l*f-s*s)/m,(s*f+l*s)/m):new o(e!==-1?e/0:0,s!==0?s/0:0),O=v.re;return v.re=n(v.re,v.im)/2,v.im=Math.atan2(v.im,O)/2,c&&(v.im=-v.im),v},acoth:function(){var e=this.re,s=this.im;if(e===0&&s===0)return new o(0,Math.PI/2);var c=e*e+s*s;return c!==0?new o(e/c,-s/c).atanh():new o(e!==0?e/0:0,s!==0?-s/0:0).atanh()},acsch:function(){var e=this.re,s=this.im;if(s===0)return new o(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var c=e*e+s*s;return c!==0?new o(e/c,-s/c).asinh():new o(e!==0?e/0:0,s!==0?-s/0:0).asinh()},asech:function(){var e=this.re,s=this.im;if(this.isZero())return o.INFINITY;var c=e*e+s*s;return c!==0?new o(e/c,-s/c).acosh():new o(e!==0?e/0:0,s!==0?-s/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var e=this.re,s=this.im,c=e*e+s*s;return new o(e/c,-s/c)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new o(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new o(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new o(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,s){var c=new o(e,s);return Math.abs(c.re-this.re)<=o.EPSILON&&Math.abs(c.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var e=this.re,s=this.im,c="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<o.EPSILON&&(e=0),Math.abs(s)<o.EPSILON&&(s=0),s===0?c+e:(e!==0?(c+=e,c+=" ",s<0?(s=-s,c+="-"):c+="+",c+=" "):s<0&&(s=-s,c+="-"),s!==1&&(c+=s),c+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(1/0,1/0),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,Object.defineProperty(o,"__esModule",{value:!0}),o.default=o,o.Complex=o,i.exports=o})()}),M=Xn(nt);function L(i){const t=typeof i=="bigint"?Number(i):i;return new M(t)}function gn(i,t=10n){const h="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,Number(t)),r=BigInt(t);let a,u=1n;if(typeof i=="string"){i[0]==="+"?i=i.slice(1):i[0]==="-"&&(u=-1n,i=i.slice(1)),a=i.toLowerCase().split("").map(e=>h.indexOf(e));const o=a.indexOf(-1);if(o!==-1)throw Error(`다음 글자를 ${t}진법 숫자로 해석할 수 없습니다: '${i[o]}'`)}else a=i;let n=0n;for(let o=0;o<a.length;o++)n*=r,n+=BigInt(a[o]);return n*u}function X(i){return typeof i!="bigint"&&(i instanceof M?X(i.re)||X(i.im):!(isFinite(i)||isNaN(i)))}function tt(i){return typeof i!="bigint"&&(i instanceof M?i.isNaN():isNaN(i))}function Zn(i){return typeof i=="bigint"||Number.isInteger(i)}function On(i,t){return t instanceof M?i.re===t.re&&i.im===t.im:i.im===0&&(typeof t=="bigint"?yn(t,i.re):t===i.re)}function yn(i,t){return Zn(t)&&i===BigInt(t)}function bn(i,t){return i instanceof M?On(i,t):t instanceof M?On(t,i):typeof i=="bigint"?yn(i,t):typeof t=="bigint"?yn(t,i):i===t}function En(i,t,h=1e-9,r=1e-16){if(h<0||r<0)throw RangeError("Tolerances must be non-negative.");if(bn(i,t))return!0;if(X(i)||X(t))return!1;const a=typeof i=="bigint"?Number(i):i,u=typeof t=="bigint"?Number(t):t,n=sn(function(o,e){return typeof o=="bigint"&&typeof e=="bigint"?o-e:o instanceof M||e instanceof M?L(o).sub(L(e)):Number(o)-Number(e)}(a,u));return n<=h*sn(u)||n<=h*sn(a)||n<=r}function sn(i){return typeof i=="bigint"?i>=0n?i:-i:i instanceof M?i.abs():Math.abs(i)}function et(i,t){return typeof i=="bigint"&&typeof t=="bigint"?i+t:i instanceof M||t instanceof M?function(h,r){return new M(h.re+r.re,h.im+r.im)}(L(i),L(t)):Number(i)+Number(t)}function rt(i,t){return typeof i=="bigint"&&typeof t=="bigint"?i*t:i instanceof M||t instanceof M?function(h,r){return new M(h.re*r.re-h.im*r.im,h.re*r.im+h.im*r.re)}(L(i),L(t)):Number(i)*Number(t)}Math.trunc=Math.trunc||function(i){return isNaN(i)?NaN:i>0?Math.floor(i):Math.ceil(i)};class Nn{constructor(t,h,r,a,u){this.filename=void 0,this.line_no=void 0,this.start_col=void 0,this.end_col=void 0,this.line=void 0,this.str=void 0,this.filename=t,this.line_no=h,this.start_col=r,this.end_col=a,this.line=u}toString(){return this.str==null&&(this.str=this.line+`
`+" ".repeat(jn.length(this.line.slice(0,this.start_col)))+"^".repeat(jn.length(this.line.slice(this.start_col,this.end_col)))),this.str}}class un{constructor(t,h){this.metadata=void 0,this.value=void 0,this.metadata=t,this.value=h}}class qn{constructor(t,h){this.metadata=void 0,this.rel=void 0,this.metadata=t,this.rel=h}}class Vn{constructor(t,h,r){this.metadata=void 0,this.relA=void 0,this.relF=void 0,this.metadata=t,this.relA=h,this.relF=r}}class Dn{constructor(t,h){this.metadata=void 0,this.body=void 0,this.metadata=t,this.body=h}}class Mn{constructor(t,h,r){this.metadata=void 0,this.fun=void 0,this.argv=void 0,this.metadata=t,this.fun=h,this.argv=r}}class tn{constructor(t,h,r){this.funs=void 0,this.args=void 0,this.utils=void 0,this.funs=t,this.args=h,this.utils=r}}class V extends Error{constructor(t){let h="";for(const r of t.metadatas)h+=`${r.filename} ${r.line_no+1}번줄 `,h+=`${r.start_col+1}~${r.end_col+1}번째 글자:
`,h+=r.toString()+`
`;super(h+`
`+t.message),this.err=void 0,this.err=t}}class P{asKey(t){return this.format(t)}}function G(i){return isFinite(i)?i.toString():isNaN(i)?"nan":i>0?"inf":"-inf"}class g extends P{constructor(t){super(),this.value=void 0,this.value=t}format(t){return this.value.toString()}}g.typeName="정수";class T extends P{constructor(t){super(),this.value=void 0,this.value=t}format(t){var h;return G(this.value)+(h=this.value,isFinite(h)&&En(h,Math.floor(h))?".0":"")}asKey(t){return G(this.value)}}T.typeName="실수";class D extends P{constructor(t){super(),this.value=void 0,this.value=t}format(t){const h=this.value.re,r=this.value.im,a=G(h)+(r<0?"":"+");return(h===0?"":a)+(r==1?"":r==-1?"-":G(r))+"i"}asKey(t){return this.value.im?this.format(t):G(this.value.re)}}D.typeName="복소수";class y extends P{constructor(t){super(),this.value=void 0,this.value=t}format(t){return this.value?"True":"False"}}y.typeName="논릿값";class N extends P{constructor(t){super(),this.value=void 0,this.value=t}format(t){return`[${this.value.map(h=>t(h).format(t)).join(", ")}]`}asKey(t){return`[${this.value.map(h=>t(h).asKey(t)).join(", ")}]`}}N.typeName="목록";class d extends P{constructor(t){super(),this.str=void 0,this.value=void 0,this.str=t,this.value=Array.from(t)}format(t){return"'"+this.str+"'"}}d.typeName="문자열";class b extends P{constructor(t){super(),this.value=void 0,this.str=void 0,this.value=t}formatByte(t){return"\\x"+("0"+t.toString(16).toUpperCase()).slice(-2)}format(t){if(!this.str){const h=Array.from(new Uint8Array(this.value)).map(this.formatByte);this.str="b'"+h.join("")+"'"}return this.str}}b.typeName="바이트열";class F extends P{constructor(t){super(),this.value=void 0,this._keys=void 0,this._values=void 0,this.value=t}keys(){return this._keys||(this._keys=Object.keys(this.value).sort()),this._keys}values(){return this._values||(this._values=this.keys().map(t=>this.value[t])),this._values}format(t){const h=this.values().map(r=>t(r).format(t));return"{"+this.keys().map((r,a)=>r+": "+h[a]).join(", ")+"}"}asKey(t){const h=this.values().map(r=>t(r).asKey(t));return"{"+this.keys().map((r,a)=>r+": "+h[a]).join(", ")+"}"}}F.typeName="사전";class x extends P{constructor(t,h,r){super(),this.inst=void 0,this.argv=void 0,this.continuation=void 0,this.inst=t,this.argv=h,this.continuation=r}format(t){const h=this.argv.map(r=>t(r).format(t)).join(", ");return`<드나듦 ${this.inst}: [${h}]>`}asKey(t){const h=this.argv.map(r=>t(r).asKey(t)).join(", ");return`<드나듦 ${this.inst}: [${h}]>`}}x.typeName="드나듦";class q extends P{constructor(){super()}format(t){return"Nil"}}q.typeName="빈값";let it=0;class j extends P{constructor(t=""){super(),this.id=void 0,this.str=void 0,this.id=it++,this.str="<"+t+"함수>"}format(t){return this.str}asKey(t){return this.str.replace(">"," #"+this.id+">")}}j.typeName="함수";class st extends j{constructor(t,h){super(`깊이 ${h.args.length}에서 생성된 `),this.body=void 0,this.env=void 0,this.body=t,this.env=h}execute(t,h){const r=this.env.args.concat([h]),a=new tn(this.env.funs,r,this.env.utils);return new H(this.body,a,null)}}class ot extends j{constructor(t,h){super(),this.module=void 0,this.module=t,this.str="<기본 제공 모듈 "+h+">"}execute(t,h){return this.module(t,h)}}class C extends P{constructor(t,h,r){super(),this.metadatas=void 0,this.message=void 0,this.value=void 0,this.metadatas=t,this.message=h,this.value=r}format(t){return`<예외: [${this.value.map(h=>h.format(t)).join(", ")}]>`}asKey(t){return`<예외: [${this.value.map(h=>h.asKey(t)).join(", ")}]>`}}C.typeName="예외";class H{constructor(t,h,r){this.expr=void 0,this.env=void 0,this.cache=void 0,this.expr=t,this.env=h,this.cache=r}}const k=[g,T],A=[...k,D],on=[N,d,b],at=[j,y,F,D,C,...on],_n="ㄱ|ㄱ|ㄴ|ㄷ|ㄷ|ㄹ|ㅁ|ㅂ|ㅂ|ㅅ|ㅅ| ㅇ|ㅈ|ㅈ|ㅈ|ㄱ|ㄷ|ㅂ| ㅎ|ㄴㄱ|ㄴ|ㄴㄷ|ㄴㅂ|ㄷㄱ|ㄹㄴ|ㄹ|ㄹ ㅎ|ㄹ|ㅁㅂ|ㅁ|ㅂㄱ|ㅂㄴ|ㅂㄷ|ㅂㅅ|ㅂㅅㄱ|ㅂㅅㄷ|ㅂㅅㅂ|ㅂㅅ|ㅂㅅㅈ|ㅂㅈ|ㅂㅈ|ㅂㄷ|ㅂㅂ|ㅂ|ㅂ|ㅅㄱ|ㅅㄴ|ㅅㄷ|ㅅㄹ|ㅅㅁ|ㅅㅂ|ㅅㅂㄱ|ㅅㅅ|ㅅ ㅇ|ㅅㅈ|ㅅㅈ|ㅅㄱ|ㅅㄷ|ㅅㅂ|ㅅ ㅎ|ㅅ|ㅅ|ㅅ|ㅅ|ㅅ| ㅇㄱ| ㅇㄷ| ㅇㅁ| ㅇㅂ| ㅇㅅ| ㅇㅅ| ㅇ| ㅇㅈ| ㅇㅈ| ㅇㄷ| ㅇㅂ| ㅇ|ㅈ ㅇ|ㅈ|ㅈ|ㅈ|ㅈ|ㅈㄱ|ㅈ ㅎ|ㅈ|ㅈ|ㅂㅂ|ㅂ| ㅎ| ㅎ|ㄱㄷ|ㄴㅅ|ㄴㅈ|ㄴ ㅎ|ㄷㄹ".split("|"),Cn="ㄱ|ㄱ|ㄱㅅ|ㄴ|ㄴㅈ|ㄴ ㅎ|ㄷ|ㄷ|ㄹ|ㄹㄱ|ㄹㅁ|ㄹㅂ|ㄹㅅ|ㄹㄷ|ㄹㅂ|ㄹ ㅎ|ㅁ|ㅂ|ㅂ|ㅂㅅ|ㅅ|ㅅ| ㅇ|ㅈ|ㅈ|ㅈ|ㄱ|ㄷ|ㅂ| ㅎ".split("|"),ut="ㄴ|ㄴㄷ|ㄴㅅ|ㄴㅅ|ㄹㄱㅅ|ㄹㄷ|ㄹㅂㅅ|ㅁㅅ|ㅁ|ㅂㄱ|ㅂㄷ|ㅂㅅㄱ|ㅂㅅㄷ|ㅂㅈ|ㅂㄷ|ㅂ|ㅂ|ㅅㄱ|ㅅㄴ| ㅇ| ㅇ| ㅇㅅ| ㅇㅅ|ㅂ| ㅎ| ㅎ".split("|"),ct="ㄷㅁ|ㄷㅂ|ㄷㅅ|ㄷㅈ|ㄹㄱ|ㄹㄱ|ㄹㄷ|ㄹㄷ|ㄹㅁ|ㄹㅂ|ㄹㅂ|ㄹㅂ|ㄹㅅ|ㄹㅈ|ㄹㄱ|ㅁㄱ|ㅁㄷ|ㅁㅅ|ㅂㅅㄷ|ㅂㄱ|ㅂ ㅎ|ㅅㅂ| ㅇㄹ| ㅇ ㅎ|ㅈ ㅎ|ㄷ|ㅂ ㅎ| ㅎㅅ| ㅎ".split("|");function ht(i){if(i.length!==1)throw Error("[normalizeChar] Length of string should be 1, not "+i.length+": "+i);function t(h,r,a=1){let u=i.charCodeAt(0)-r.charCodeAt(0);return u=Math.floor(u/a),u>=0&&u<h.length?h[u]:""}return i>="ᄀ"&&i<="ᇿ"?t(_n,"ᄀ"):i>="〮"&&i<="〯"?"":i>="ㄱ"&&i<="ㅤ"?t(Cn,"ㄱ"):i>="ㅥ"&&i<="ㆎ"?t(ut,"ㅥ"):i>="ꥠ"&&i<="ꥼ"?t(ct,"ꥠ"):i>="가"&&i<="힯"?t(_n,"가",588):i>="ힰ"&&i<="ퟆ"||i>="ퟋ"&&i<="ퟻ"?"":i>="ﾠ"&&i<="ﾾ"?t(Cn,"ﾡ"):"ￂￃￄￅￆￇￊￋￌￍￎￏￒￓￔￕￖￗￚￛￜ".indexOf(i)>=0?"":" "}function Yn(i){return i.split("").map(ht).join("").split(/( )/)}function B(i){const t=i.split("").map(function(r){return"ㄱㄴㄷㄹㅁㅂㅅㅈ".indexOf(r)});if(t.indexOf(-1)!==-1)throw SyntaxError("Argument "+i+" has an unsupported character");let h=BigInt("0o"+t.reverse().join(""));return i.length%2==0&&(h=-h),h}function nn(i){const t=i<0;let h=(i=i>=0?i:-i).toString(8).split("").reverse().map(r=>"ㄱㄴㄷㄹㅁㅂㅅㅈ"[+r]).join("");return h.length%2==0!==t&&(h+="ㄱ"),h}function ft(i,t){const[h,r]=i;if(h.indexOf("ㅎ")!==-1){const a=h.slice(1);if(a){const u=Number(B(a));if(u<0)throw new Y(r,`함수 호출 시 ${u}개의 인수를 요구했습니다.`);const n=t.pop();if(n==null)throw new Y(r,"호출할 함수가 없습니다.");if(u===0)t.push(new Mn(r,n,[]));else{const o=t.splice(-u,u);if(o.length<u)throw new Y(r,`함수 호출 시 ${u}개의 인수를 요구했으나 표현식이 ${o.length}개밖에 없습니다.`);t.push(new Mn(r,n,o))}}else{const u=t.pop();if(u==null)throw new Y(r,"함수 몸통이 없습니다.");t.push(new Dn(r,u))}}else if(h.indexOf("ㅇ")!==-1){const a=h.slice(1);if(a!==""){const u=t.pop();if(u==null)throw new Y(r,"인수 참조 구문이 잘못되었습니다.");const n=Number(B(a));t.push(new Vn(r,u,n))}else{const u=t.pop();if(u==null)throw new Y(r,"함수 참조 구문이 잘못되었습니다.");if(!(u instanceof un))throw new Y(r,"함수 참조 시에는 정수 리터럴만 허용됩니다.");t.push(new qn(r,Number(u.value)))}}else t.push(new un(r,B(h)))}function $n(i,t){const h=function(a,u){const n=u.split(`
`).flatMap((c,f)=>(c+`
`).split("").flatMap((l,m)=>Yn(l).filter(v=>v!=="").map(v=>[v,new Nn(a,f,m,m+1,c)])));if(n.length===0)return[];let o=[n[0]];for(const[c,f]of n.slice(1)){const l=o.pop();if(l==null)throw Error("Internal::tokenize::EMPTY_STACK");const[m,v]=l;m===" "&&c===" "?o.push([m,v]):m!==" "&&c!==" "?o.push([m+c,(e=v,s=f,new Nn(e.filename,e.line_no,e.start_col,s.end_col,e.line))]):(o.push([m,v]),o.push([c,f]))}var e,s;return o.filter(([c,f])=>c!==" ")}(i,t),r=[];for(const a of h)ft(a,r);return r}class Z extends V{constructor(t,h,r){const a=[B("ㅂ"),...r].map(u=>new g(u));super(new C([t],h,a))}}class z extends Z{constructor(t,h){super(t,h,[B("ㅈㅈ")])}}class lt extends Z{constructor(t,h){super(t,h,[B("ㅅㅅ")])}}class Y extends Z{constructor(t,h){super(t,h,[B("ㅁㅂ")])}}class mt extends Z{constructor(t,h){super(t,h,[B("ㄱ")])}}class $ extends Z{constructor(t,h){super(t,h,[B("ㅈㅁ")])}}class pn extends Z{constructor(t,h){super(t,h,[B("ㄴㄴ")])}}class cn extends Z{constructor(t,h){super(t,h,[B("ㅁㅈ")])}}class wt extends Z{constructor(t,h){super(t,h,[B("ㅂ")])}}class an extends Z{constructor(t,h){super(t,h,[B("ㅂㄱ")])}}function Rn(i){return i instanceof H&&i.expr instanceof un}function K(i){return i.value}function Pn(i){const t=i.map(a=>a.byteLength).reduce((a,u)=>a+u,0),h=new ArrayBuffer(t),r=new Uint8Array(h);return i.reduce(function(a,u){return r.set(new Uint8Array(u),a),a+u.byteLength},0),h}function J(i,t){const h=t(i);if(h instanceof N)return new N(h.value.map(r=>J(r,t)));if(h instanceof F){const r=h.value,a={};return Object.keys(r).forEach(function(u){a[u]=J(r[u],t)}),new F(a)}return h instanceof C?new C(h.metadatas,h.message,h.value.map(r=>J(r,t))):h}function R(i){return i.length===0||i.every(function(t){return t===i[0]})}function I(i,t){return i.every(function(h){return t.some(function(r){return h instanceof r})})}function In(i,t=", "){return i.join(t)}function w(i,t,h){if(I(t,h))return t;const r=h.map(u=>u.typeName),a=t.map(u=>u.constructor.typeName);throw new mt(i,`인수를 ${In(r)} 중에서 주어야 하는데 ${function(u,n,o){if(u.length===0)return u+"을";const e=u.charCodeAt(u.length-1);return e<44032||e>55203?u+"을":u+((e-44032)%28!=0?"을":"를")}(In(a))} 주었습니다.`)}function p(i,t,h){const r=Array.isArray(h)?h:[h];if(r.indexOf(t.length)===-1)throw new $(i,`인수를 ${In(r.map(a=>a.toString()),"개나 ")}개를 주어야 하는데 ${t.length}개의 인수를 주었습니다.`)}function Q(i,t,h){if(!(t.length>=h))throw new $(i,`인수를 ${h}개 이상 주어야 하는데${t.length}개 주었습니다.`)}function xn(i,t,h){if(!(t.length<=h))throw new $(i,`인수를 ${h}개 이하 주어야 하는데${t.length}개 주었습니다.`)}function zn(i,t,h,r){return r===void 0&&(r=[]),xn(i,t,h),Q(i,t,h-r.length),t.length<h&&(t=t.concat(r.slice(-(h-t.length)))),t}function W(i){return typeof i=="bigint"?new g(i):i instanceof M?new D(i):new T(i)}function Sn(i,t){const h=zn(i,t,2,[new g(10n)]),[r]=w(i,[h[0]],[d]),[a]=w(i,[h[1]],[g]);return[r.str,Number(a.value)]}class vt extends j{constructor(t){super("연결된 "),this.funs=void 0,this.funs=t}execute(t,h){return this.funs.reduce((r,a)=>[a(t,r)],h)[0]}}class pt extends j{constructor(t,h){super("모아 받는 "),this.fn=void 0,this.strict=void 0,this.fn=t,this.strict=h}execute(t,h){p(t,h,1);const r=this.strict(h[0]),[a]=w(t,[r],[N,C]);return this.fn(t,a.value)}}class dt extends j{constructor(t){super("펼쳐 받는 "),this.fn=void 0,this.fn=t}execute(t,h){return this.fn(t,[new N(h)])}}const kn={ㄹ:"r",ㅈㄹ:"w",ㅈㄱ:"a",ㄹㅈㄹ:"r+",ㅈㄹㄹ:"w+",ㅈㄱㄹ:"a+"};class gt extends j{constructor(t,h){super("파일 접근 "),this.file=void 0,this.strict=void 0,this.file=t,this.strict=h}execute(t,h){Q(t,h,1);const[r]=w(t,h.slice(-1).map(this.strict),[g]),a=nn(r.value);if(a==="ㄷ")return this.close(t,h);if(a==="ㄹ")return this.read(t,h);if(a==="ㅈㄹ")return this.write(t,h);if(a==="ㅈ")return this.seekOrTell(t,h);if(a==="ㄱ")return this.truncate(t,h);throw new $(t,`${a}은 파일 객체가 인식하지 못하는 명령입니다.`)}close(t,h){var r=this;return p(t,h,1),new x("FileV::close",[this],async function(a,u){try{return r.file.close(),new q}catch(n){throw new z(t,`파일 닫기에 실패하였습니다: ${n}`)}})}read(t,h){var r=this;p(t,h,2);const[a]=w(t,[this.strict(h[0])],[g]);return new x("FileV::read",[this,a],async function(u,n){try{const o=await r.file.read(Number(a.value));return new b(o)}catch(o){throw new z(t,`파일 읽기에 실패하였습니다: ${o}`)}})}write(t,h){var r=this;p(t,h,2);const[a]=w(t,[this.strict(h[0])],[b]);return new x("FileV::write",[this,a],async function(u,n){try{const o=r.file.write(a.value);return new g(BigInt(o))}catch(o){throw new z(t,`파일 쓰기에 실패하였습니다: ${o}`)}})}seekOrTell(t,h){var r=this;xn(t,h,3);const a=h.map(this.strict);if(h.length===1)return new x("FileV::seekOrTell",[this],async function(o,e){try{return new g(BigInt(r.file.tell()))}catch(s){throw new z(t,`파일의 어디를 읽고 있는지 알아내는 데 실패하였습니다: ${s}`)}});let u,n="SEEK_SET";if(h.length===2)[u]=w(t,[a[0]],[g]);else{[u]=w(t,[a[1]],[g]);let[o]=w(t,[a[0]],[g]);switch(nn(o.value)){case"ㅅㅈㅂㄷ":n="SEEK_SET";break;case"ㅈㄱㅂㄷ":n="SEEK_CUR";break;default:throw new $(t,`파일 객체의 ㅈ 명령에 주는 위치 인수로 ${o.value}은 적절하지 않습니다.`)}}return new x("FileV::seekOrTell",[this,...a.slice(0,-1)],async function(o,e){try{const s=r.file.seek(Number(u.value),n);return new g(BigInt(s))}catch(s){throw new z(t,`파일의 읽는 위치를 수정하는 데 실패하였습니다: ${s}`)}})}truncate(t,h){var r=this;xn(t,h,2);const a=w(t,h.map(this.strict),[g]),u=a.length>1?Number(a[0].value):void 0;return new x("FileV::truncate",[this,...a.slice(0,-1)],async function(n,o){try{const e=r.file.truncate(u);return new g(BigInt(e))}catch(e){throw new z(t,`파일 크기를 재조정하는 데 실패하였습니다: ${e}`)}})}}const yt=["utf","unsigned","signed","float"];class bt extends j{constructor(t,h,r,a,u){super(),this.strict=void 0,this.scheme=void 0,this.numBytes=void 0,this.bigEndian=void 0,this.endianness=void 0,this.codec=void 0,this.strict=t;const[n,o]=w(h,[r,a],[g]);if(this.scheme=yt[Number(n.value)],this.numBytes=Number(o.value),this.endianness="",u){const[e]=w(h,[u],[y]);this.bigEndian=e.value,this.endianness=this.bigEndian?"big":"little"}this.codec=this.getCodec(),this.str="<Codec(scheme="+this.scheme+", num_bytes="+this.numBytes+", big_endian="+this.bigEndian+")>"}execute(t,h){const r=h.map(this.strict);try{return this.codec(t,r)}catch(a){throw a instanceof V?a:new $(t,`요청된 변환을 수행하지 못했습니다. 변환기: ${this.str}, 인수: ${r}`)}}getCodec(){switch(this.scheme){case"utf":return this.unicodeCodec;case"signed":case"unsigned":return this.integerCodec;case"float":return this.floatingPointCodec}}unicodeCodec(t,h){p(t,h,1);const[r]=w(t,h.map(this.strict),[d,b]);if(r instanceof d){if(this.numBytes===1){const o=new TextEncoder;return new b(o.encode(r.str).buffer)}let u;if(this.numBytes===2)u=r.str.split("").map(o=>o.charCodeAt(0));else{if(this.numBytes!==4)throw new $(t,`UTF-${8*this.numBytes} 형식은 존재하지 않습니다.`);u=r.value.map(o=>o.codePointAt(0)).filter(o=>o!=null)}this.endianness===""&&u.unshift(65279);const n=new ArrayBuffer(u.length*this.numBytes);return function(o,e,s,c){const f={1:o.setUint8.bind(o),2:o.setUint16.bind(o),4:o.setUint32.bind(o)}[s];if(f==null)throw Error();for(let l=0;l<e.length;l++)f(l*s,e[l],!c)}(new DataView(n),u,this.numBytes,this.bigEndian),new b(n)}{var a;const u=r.value;if(this.numBytes===1){const s=new TextDecoder;return new d(s.decode(new Uint8Array(u)))}let n=new DataView(u),o=(a=this.bigEndian)!=null?a:function(){const s=new ArrayBuffer(2);return new DataView(s).setInt16(0,256,!1),new Int16Array(s)[0]===256}();if(this.endianness===""){const s=(this.numBytes>2?n.getUint32:n.getUint16).bind(n),c=s(0)===65279;(c||s(0,!0)===65279)&&(o=c,n=new DataView(u,this.numBytes))}const e=function(s,c,f){const l={1:s.getUint8.bind(s),2:s.getUint16.bind(s),4:s.getUint32.bind(s)}[c];if(l==null)throw Error();var m=[];for(let v=0;v<s.byteLength;v+=c)m.push(l(v,!f));return m}(n,this.numBytes,o);return new d(String.fromCodePoint(...e))}}integerCodec(t,h){p(t,h,1);const r=this.scheme==="signed",[a]=w(t,h.map(this.strict),[g,b]);if(a instanceof g){let u=a.value;const n=u<0;if(n&&!r)throw Error("음수는 부호 없는 정수 형식으로 변환할 수 없습니다.");if(!function(c,f,l){const m=2n<<8n*f;return l?-m/2n<=c&&c<m/2n:0n<=c&&c<m}(u,BigInt(this.numBytes),r))throw Error(`${this.numBytes}바이트로 표현할 수 없는 정수를 받았습니다.`);n&&(u=~u);const o=function(c,f=10n){if(c<0n)throw Error("Cannot convert a negative integer into array form.");const l=BigInt(f),m=[];for(;c>0n;)m.push(c%l),c/=l;return m.reverse()}(u,256n).map(Number),e=new ArrayBuffer(this.numBytes),s=new Uint8Array(e);return s.set(o,this.numBytes-o.length),n&&s.forEach((c,f)=>s[f]=~c),this.bigEndian||s.reverse(),new b(e)}{const u=a.value.slice(0),n=new Uint8Array(u);this.bigEndian||n.reverse();const o=r&&128&n[0];o&&n.forEach((s,c)=>n[c]=~s);let e=gn(Array.from(n),256);return o&&(e=~e),new g(e)}}floatingPointCodec(t,h){throw EvalError("Not yet implemented")}}function Nt(i){return i>0?Math.ceil(i):Math.floor(i)}function Mt(i){let t=Math.round(i);return i%1!=.5&&i%1!=-.5||t%2!=1&&t%2!=-1||t--,t}function rn(i){return t=>new i(t)}const It=[function(i,t,h){function r(a,u){return function(n,o){p(n,o,u);const e=w(n,o.map(t),[g]);return new g(a(...e.map(K)))}}return{ㅂㄷ:{ㄱ:r((a,u)=>a&u,2),ㄷ:r((a,u)=>a|u,2),ㅁ:r(a=>~a,1),ㅂ:r((a,u)=>a^u,2),ㅈ:r((a,u)=>a<<u,2)}}},function(i,t,h){return{ㅂ:function(r,a){p(r,a,[2,3]);const u=a.map(t);return new bt(t,r,u[0],u[1],u.length>2?u[2]:void 0)}}},function(i,t,h){function r(e,s,c,f){return function(l,m){p(l,m,s);const v=w(l,m.map(t),f).map(O=>O.value);return c(e(...v))}}function a(e){return function(s,c){p(s,c,1);const f=w(s,[t(c[0])],A);if(I(f,k)){const l=Math[e](Number(f[0].value));if(!isNaN(l))return new T(l)}return new D(L(f[0].value)[e]())}}function u(e){return function(s,c){p(s,c,1);const[f]=w(s,[t(c[0])],k);if(f instanceof g)return f;const l=BigInt(e(f.value));return new g(l)}}const n=a("atan"),o=r((e,s)=>Math.atan2(Number(e),Number(s)),2,rn(T),k);return{ㅅ:{ㅂ:Math.PI,ㅈ:Math.E,ㅁ:1/0,ㄴ:NaN,ㄱ:r((e,s)=>En(e,s),2,rn(y),A),ㄴㄴ:r(tt,1,rn(y),A),ㅁㄴ:r(X,1,rn(y),A),ㅈㄷ:r(sn,1,W,A),ㄹㄱ:a("log"),ㅅㄴ:a("sin"),ㄴㅅ:a("asin"),ㄱㅅ:a("cos"),ㅅㄱ:a("acos"),ㄷㄴ:a("tan"),ㄴㄷ:function(e,s){return s.length===2?o(e,s):n(e,s)},ㅂㄹ:{ㄱ:u(Math.trunc),ㄴ:u(Math.floor),ㄷ:u(Mt),ㄹ:u(Math.ceil),ㅁ:u(Nt)}}}}];var Un={},Wn=new F({});function Hn(i,t){i=t.normalizePath(i);var h=Un[i];if(h)return h;const r=$n(i,t.load(i));if(r.length!==1)throw new $(r[0].metadata,`모듈에는 표현식이 하나만 있어야 하는데 ${r.length}개가 있습니다.`);const a=new tn([],[],t);return h=new H(r[0],a,null),Un[i]=h,h}function xt(i,t,h){const r=`정수 리터럴열 ${t.map(nn).join(" ")}에 맞는 모듈을 찾지 못했습니다.`;if(t[0]===5n){var a=Wn;for(const n of t.slice(1)){if(!(a instanceof F))throw new cn(i,r);a=a.value[n.toString()]}return a}const u=Gn(i,t,".",h);if(!u)throw new cn(i,r);return Hn(u,h)}function Gn(i,t,h,r){if(t.length===0)return r.isFile(h)?h:null;const a=t[0],u=t.slice(1),n=r.listdir(h).map(o=>{if(!function(s,c){s=Yn(s).join(" ").trim();try{return B(s)===c}catch{return!1}}(o,a))return null;const e=r.joinPath(h,o);return Gn(i,u,e,r)}).filter(o=>o);if(n.length>1)throw new wt(i,`${h}에 정수 리터럴열 ${t}에 맞는 모듈이 ${n.length}개 있어 모호합니다.`);return n.length?n[0]:null}function Et(i,t){return typeof i=="function"?new ot(i,t.join(" ")):typeof i=="number"?new T(i):Jn(i,t)}function Jn(i,t){let h={};for(const r in i)h[B(r).toString()]=Et(i[r],t.concat([r]));return new F(h)}function*dn(i,t,h,r){const a=t<0?t+i.length:t,u=h<0?h+i.length:h;if(r>0){const n=Math.max(0,a),o=Math.min(u,i.length);for(let e=n;e<o;e+=r)yield i[e]}else{const n=Math.min(a,i.length-1),o=Math.max(-1,u);for(let e=n;e>o;e+=r)yield i[e]}}const Ln={};let Tn=!1;const $t=[function(i,t,h){return{ㄱ:function(r,a){if(Q(r,a,1),I(w(r,[t(a[0])],[y,...A]),A))return W(w(r,a.map(t),A).map(u=>u.value).reduce(rt));for(const u of a){const[n]=w(r,[t(u)],[y]);if(!n.value)return new y(!1)}return new y(!0)},ㄷ:function(r,a){Q(r,a,1);const u=w(r,[t(a[0])],[y,F,...A,...on]);if(I(u,[y])){for(const n of a){const[o]=w(r,[t(n)],[y]);if(o.value)return new y(!0)}return new y(!1)}if(I(u,[d])){const n=w(r,a.map(t),[d]);return new d(n.map(o=>o.str).join(""))}if(I(u,[b])){const n=w(r,a.map(t),[b]);return new b(Pn(n.map(K)))}if(I(u,[N])){const n=w(r,a.map(t),[N]);return new N(n.map(K).reduce((o,e)=>o.concat(e)))}if(I(u,[F])){const n=w(r,a.map(t),[F]),o={};return n.map(K).forEach(e=>Object.assign(o,e)),new F(o)}return W(w(r,a.map(t),A).map(n=>n.value).reduce(et))},ㅅ:function(r,a){p(r,a,[2,3]);const u=w(r,a.map(t),A);if(u.length===3){const[n,o,e]=w(r,u,[g]);try{return new g(function(s,c,f){if(f===0n)throw Error("0을 법으로 할 수 없습니다.");s%=f;let l=1n;for(c<0n&&(c=-c,s=function(m,v){const[O,_,S]=function(E,en){let[ln,mn,wn,vn]=[0n,1n,1n,0n];for(;E!==0n;){const Bn=en/E;[E,en]=[en%E,E],[wn,vn]=[vn,wn-Bn*vn],[ln,mn]=[mn,ln-Bn*mn]}return[en,ln,wn]}(m%v,v);if(O===1n)return(_+v)%v;throw Error(`법 ${v}에 대한 ${m}의 역원이 없습니다.`)}(s,f));c>0n;){if(s===0n)return 0n;c%2n===1n&&(l=l*s%f),c/=2n,s=s**2n%f}return l}(n.value,o.value,e.value))}catch(s){throw s instanceof Error?new lt(r,s.message):s}}p(r,u,2);try{return W(function(n,o){if(typeof n=="bigint"&&typeof o=="bigint"&&o>=0)return n**o;const e=typeof(s=o)=="bigint"||typeof s=="number"?s:En(s.im,0)?s.re:s;var s;if(!(e instanceof M)&&e<0&&bn(n,0))throw Error("0의 역수를 구하려고 했습니다.");return n instanceof M||o instanceof M||n<0&&!Zn(o)?L(n).pow(L(o)):Number(n)===1?1:Math.pow(Number(n),Number(o))}(u[0].value,u[1].value))}catch(n){throw n instanceof Error?new pn(r,n.message):n}},ㄴㄴ:function(r,a){p(r,a,2);const u=w(r,a.map(t),k);try{return W(function(n,o){if(Number(o)===0)throw Error("0으로 나눌 수 없습니다.");return typeof n=="bigint"&&typeof o=="bigint"?n/o:Math.trunc(Number(n)/Number(o))}(u[0].value,u[1].value))}catch(n){throw n instanceof Error?new pn(r,"0의 역수를 구하려고 했습니다."):n}},ㄴㅁ:function(r,a){p(r,a,2);const u=w(r,a.map(t),k);try{return W(function(n,o){if(Number(o)===0)throw Error("0으로 나눌 수 없습니다.");return typeof n=="bigint"&&typeof o=="bigint"?n%o:Number(n)%Number(o)}(u[0].value,u[1].value))}catch(n){throw n instanceof Error?new pn(r,"0의 역수를 구하려고 했습니다."):n}}}},function(i,t,h){return{ㅅㅈ:function(r,a){const u=a.length;if(u%2==1)throw new $(r,`ㅅㅈ 함수에는 인수를 짝수 개로 주어야 하는데 ${u}개를 주었습니다.`);const n=a.filter((c,f)=>f%2==0),o=a.filter((c,f)=>f%2==1),e=n.map(t).map(c=>c.asKey(t)),s={};for(let c=0;c<u/2;c++)s[e[c]]=o[c];return new F(s)},ㅁㄹ:function(r,a){return new N(a)},ㅁㅈ:function(r,a){if(p(r,a,[0,1]),a.length===0)return new d("");const[u]=w(r,[t(a[0])],[d,...A]);return u instanceof d?u:new d(u.format(t))},ㅈㅅ:function(r,a){p(r,a,[1,2]);const u=w(r,a.map(t),[d,...k]),n=[u[0]];if(I(n,k)){if(p(r,u,1),n[0]instanceof g)return n[0];const s=Math.trunc(n[0].value);return new g(BigInt(s))}const[o,e]=Sn(r,u);try{return new g(gn(o,e))}catch(s){throw s instanceof Error?new $(r,s.message):s}},ㅅㅅ:function(r,a){p(r,a,[1,2]);const u=w(r,a.map(t),[d,...k]),n=[u[0]];if(I(n,k))return p(r,u,1),new T(Number(n[0].value));const[o,e]=Sn(r,u);if(e===10){const f=Number(o);if(isNaN(f))throw new $(r,`다음 문자열을 실수값으로 변환할 수 없습니다: '${o}'`);return new T(f)}const s=o.trim().split(".");let c=s.join("");c[0]==="+"&&(c=c.slice(1));try{const f=Number(gn(c,e));return new T(f/e**(s.length>1?s[1].length:0))}catch{throw new $(r,`다음 문자열을 실수값으로 변환할 수 없습니다: '${o}'`)}},ㅂㅅ:function(r,a){p(r,a,[1,2]);const u=w(r,a.map(t),[d,...A]);if(a.length===1){const o=u[0]instanceof d?u[0].str:u[0].value;try{return new D(L(o))}catch(e){throw e instanceof Error?new $(r,`다음 문자열을 복소수값으로 변환할 수 없습니다: ${o}`):e}}const n=w(r,u,A).map(o=>L(o.value));return new D(M({re:n[0].re-n[1].im,im:n[0].im+n[1].re}))},ㅂㄱ:function(r,a){return p(r,a,0),new q},ㄷㅂ:function(r,a){const u=a.map(t),n=`사용자 예외: ${u.map(o=>o.format(t))}`;return new C([r],n,u)}}},function(i,t,h){return{ㄷㅈ:function(r,a){p(r,a,1);const[u]=w(r,a.map(t),[C]);throw new V(u)},ㅅㄷ:function(r,a){p(r,a,2);try{return J(a[0],t)}catch(u){if(u instanceof V)return i(r,a[1])(r,[u.err]);throw u}}}},function(i,t,h){function r(a){return u=>i(a,u,!0)}return{ㄴㄱ:function(a,u){return new vt(u.map(r(a)))},ㅁㅂ:function(a,u){return p(a,u,1),new pt(r(a)(u[0]),t)},ㅂㅂ:function(a,u){return p(a,u,1),new dt(r(a)(u[0]))}}},function(i,t,h){return{ㄹ:function(r,a){return p(r,a,0),new x("ㄹ",a,async function(u,n){const o=await n.input();return o==null?new q:new d(o)})},ㅈㄹ:function(r,a){p(r,a,1);const u=w(r,a.map(t),[d]);return new x("ㅈㄹ",u,async function(n,o){return o.print(u[0].str),new q})},ㄱㅅ:function(r,a){p(r,a,1);const u=J(a[0],t);return new x("ㄱㅅ",[u],async function(n,o){return u})},ㄱㄹ:function(r,a){p(r,a,[2,3]);const[u]=w(r,[t(a[0])],[x]);return new x("ㄱㄹ",a,async function(n,o){let e;try{e=await n(u)}catch(f){if(f instanceof V){if(a.length<3)throw f;const l=i(r,a[2])(r,[f.err]),[m]=w(r,[t(l)],[x]);return m}throw f}const s=i(r,a[1])(r,[e]),[c]=w(r,[t(s)],[x]);return c})},ㄱㄴ:function(r,a){p(r,a,2);const[u]=w(r,[t(a[0])],[g,d]),n=u instanceof g?Number(u.value):u.str,[o]=w(r,[t(a[1])],[g]),e=nn(o.value);if(!(e in kn))throw new $(r,`${e}은 기본 제공 함수 ㄱㄴ이 이해하는 파일 열기 방식이 아닙니다.`);const s=kn[e];return new x("ㄱㄴ",[u,o],async function(c,f){try{return new gt(h.open(n,s),t)}catch(l){throw new z(r,`파일 열기에 실패하였습니다: ${l}`)}})}}},function(i,t,h){function r(u){if(u.length===0)return!0;if(!R(u.map(e=>e.length)))return!1;for(var n=u[0].length,o=0;o<n;o++)if(!a(u.map(e=>e[o])).value)return!1;return!0}function a(u){const n=u.map(t);return I(n,[j])?new y(R(n)):I(n,[F])?new y(function(e){if(e.length===0)return!0;const s=e.map(c=>c.keys());return!!r(s.map(c=>c.map(f=>new d(f))))&&s[0].map(c=>e.map(f=>f.value[c])).map(a).every(K)}(n)):I(n,[x])?R(n.map(e=>e.inst))?new y(r(n.map(e=>e.argv))):new y(!1):I(n,A)?new y((o=n.map(e=>e.value)).length===0||o.slice(1).every(e=>bn(e,o[0]))):I(n,[N,C])?new y(r(n.map(K))):I(n,[b])?new y(function(e){if(e.length===0)return!0;if(!R(e.map(f=>f.byteLength)))return!1;const s=e[0].byteLength,c=e.map(f=>new Uint8Array(f));for(let f=0;f<s;f++)if(!R(c.map(l=>l[f])))return!1;return!0}(n.map(K))):I(n,[d])?new y(R(n.map(e=>e.str))):I(n,[y])?new y(R(n.map(K))):I(n,[q])?new y(!0):new y(!1);var o}return{ㄴ:function(u,n){return a(n)},ㅁ:function(u,n){p(u,n,1);const o=w(u,n.map(t),[y]);return new y(!o[0].value)},ㅈ:function(u,n){p(u,n,2);const o=w(u,n.map(t),k);return new y(o[0].value<o[1].value)},ㅈㅈ:function(u,n){return p(u,n,0),new y(!0)},ㄱㅈ:function(u,n){return p(u,n,0),new y(!1)}}},function(i,t,h){return It.forEach(function(r){const a=Jn(r(i,t,h),["ㅂ"]);Object.assign(Wn.value,a.value)}),{ㅂ:function(r,a){if(Q(r,a,1),a.every(Rn))return xt(r,a.map(n=>n.expr.value),h);p(r,a,1);const[u]=w(r,[t(a[0])],[d]);return Hn(u.str,h)}}},function(i,t,h){return{ㅈㄷ:function(r,a){p(r,a,1);const[u]=w(r,a.map(t),[...on,C]);return new g(u instanceof b?BigInt(u.value.byteLength):BigInt(u.value.length))},ㅂㅈ:function(r,a){p(r,a,[2,3,4]);const u=a.map(t),[n]=w(r,[u[0]],on),o=w(r,u.slice(1),[g]).map(m=>Number(m.value)),[e,s,c]=zn(r,o,3,[(f=n.value,"length"in f?f.length:f.byteLength),1]);var f;if(c===0)throw new $(r,"0은 ㅂㅈ 함수의 네 번째 인수로 적합하지 않습니다.");if(n instanceof N){const m=dn(n.value,e,s,c);return new N(Array.from(m))}if(n instanceof d){const m=dn(n.value,e,s,c);return new d(Array.from(m).join(""))}const l=dn(Array.from(new Uint8Array(n.value)),e,s,c);return new b(new Uint8Array(l).buffer)},ㅁㄷ:function(r,a){p(r,a,2);const[u]=w(r,[t(a[0])],[N]),n=i(r,a[1]);return new N(u.value.map(o=>n(r,[o])))},ㅅㅂ:function(r,a){p(r,a,2);const[u]=w(r,[t(a[0])],[N]),n=i(r,a[1]),o=u.value.map(s=>n(r,[s])).map(t),e=w(r,o,[y]).map(K);return new N(u.value.filter((s,c)=>e[c]))},ㅅㄹ:function(r,a){p(r,a,[2,3]);let u=null;a.length===3&&(u=a[1],a=[a[0],a[2]]);const n=t(a[0])instanceof N;function o(f){return n?f.slice().reverse():f}a=o(a);const e=i(r,a[0]),[s]=w(r,[t(a[1])],[N]);let c=o(s.value);return u==null&&(u=c[0],c=c.slice(1)),c.reduce(function(f,l){const m=o([f,l]);return e(r,m)},u)}}},function(i,t,h){return{ㅂㄹ:function(r,a){p(r,a,[1,2]);const u=w(r,a.map(t),[d,b]);if(u[0]instanceof d){const c=w(r,u,[d]),f=c[0].str.split(c.length>1?c[1].str:"");return new N(f.map(l=>new d(l)))}const n=w(r,u,[b]),o=String.fromCharCode(...new Uint8Array(n[0].value)),e=n.length>1?String.fromCharCode(...new Uint8Array(n[1].value)):"",s=o.split(e).map(c=>new b(new Uint8Array(c.split("").map(f=>f.charCodeAt(0))).buffer));return new N(s)},ㄱㅁ:function(r,a){p(r,a,[1,2]);const[u]=w(r,[t(a[0])],[N]),n=w(r,u.value.map(t),[d,b]);if(n[0]instanceof d){const f=w(r,n,[d]),l=a.length>1?t(a[1]):new d(""),[m]=w(r,[l],[d]);return new d(f.map(v=>v.str).join(m.str))}const o=w(r,n,[b]),e=a.length>1?t(a[1]):new b(new ArrayBuffer(0)),[s]=w(r,[e],[b]);if(o.length===0)return new b(new ArrayBuffer(0));const c=[o[0].value];for(const f of o.slice(1))c.push(s.value),c.push(f.value);return new b(Pn(c))}}}];function U(i){if(i instanceof H){if(i.cache){if(i.cache instanceof V)throw i.cache;return i.cache}try{return i.cache=U(fn(i.expr,i.env)),i.cache}catch(t){throw t instanceof V&&(i.cache=t),t}}return i}function hn(i,t){const h=t<0?t+i.length:t;if(h<0||h>=i.length)throw Error(`길이 ${i.length}의 객체의 ${t}번째 요소를 요청했습니다.`);return i[h]}function fn(i,t){if(i instanceof un)return new g(i.value);if(i instanceof qn){const o=hn(t.funs,-i.rel-1);if(o==null)throw new an(i.metadata,"함수 참조의 범위를 벗어났습니다.");return o}if(i instanceof Vn){if(t.funs.length!==t.args.length)throw Error("Assertion Error: Environment has "+t.funs.length+" funs and "+t.args.length+" args.");const o=hn(t.args,-i.relF-1);if(o==null)throw new an(i.metadata,"존재하지 않는 함수에 대한 인수 참조를 시도했습니다.");const e=U(fn(i.relA,t)),[s]=w(i.metadata,[e],[g]),c=s.value;if(c<0||c>o.length)throw new an(i.metadata,`${c}번째 인수를 참조하는데 ${o.length}개의 인수만 받았습니다.`);return o[Number(c)]}if(i instanceof Dn){var h=t.funs.slice(),r=new tn(h,t.args,t.utils),a=new st(i.body,r);return r.funs.push(a),a}if(i instanceof Mn){var u=new H(i.fun,t,null),n=i.argv.map(function(o){return new H(o,t,null)});return An(i.metadata,u,!0)(i.metadata,n)}throw Error("Unexpected expression: "+i)}function An(i,t,h=!1){if(Rn(t))return function(u,n,o){(function(c){if(!Tn){for(const f of $t)Object.assign(Ln,f(An,U,c));Tn=!0}})(o);const e=nn(n),s=Ln[e];if(s)return s;throw new cn(u,`${e}이라는 이름의 기본 제공 함수를 찾지 못했습니다.`)}(i,Number(t.expr.value),t.env.utils);const r=h?at:[j],[a]=w(i,[U(t)],r);return a instanceof j?a.execute.bind(a):a instanceof y?function(u,n){return p(u,n,2),n[a.value?0:1]}:a instanceof F?function(u,n){p(u,n,1);const o=U(n[0]).asKey(U),e=a.value[o];if(e)return e;throw new cn(u,`사전에 다음 표제가 없습니다: ${o}`)}:a instanceof D?function(u,n){p(u,n,1);const o=U(n[0]),[e]=w(u,[o],[g]);if(e.value===0n||e.value===1n)return new T(a.value.toVector()[Number(e.value)]);throw new $(u,`복소수 객체의 ${e.value}번째 요소를 접근하려고 했습니다.`)}:function(u,n){p(u,n,1);const o=U(n[0]),[e]=w(u,[o],[g]),s=Number(e.value);try{return a instanceof b?new b(function(c,f){const l=f<0?f+c.byteLength:f;if(l<0||l>=c.byteLength)throw Error(`길이 ${c.byteLength}의 바이트열의 ${f}번째 요소를 요청했습니다.`);return c.slice(l,l+1)}(a.value,s)):a instanceof d?new d(hn(a.value,s)):hn(a.value,s)}catch(c){throw c instanceof Error?new an(u,c.message):c}}}async function Fn(i,t){const h=r=>Fn(r,t);for(;i instanceof x;)i=await i.continuation(h,t);return i}async function Qn(i,t,h,r){const a=u=>Qn(u,t,h,r);if((i=t(i))instanceof x){i=await Fn(i,h);const u=await a(i);return r?"IO("+u+")":u}if(i instanceof N)return"["+(await Promise.all(i.value.map(a))).join(", ")+"]";if(i instanceof F){const u=i.value,n=i.keys();return"{"+(await Promise.all(n.map(async o=>o+": "+await a(u[o])))).join(", ")+"}"}return i instanceof C?"<예외: ["+(await Promise.all(i.value.map(a))).join(", ")+"]>":i.format(t)}async function At(i,t,h,r,a=!0){const u=$n(i,t),n=new tn([],[],r),o=u.map(e=>fn(e,n));return Promise.all(o.map(e=>Qn(e,U,h,a)))}async function Ft(i,t,h,r,a){const u=new Nn("<main>",0,0,0,""),n=h.map(f=>new d(f)),o=$n(i,t);if(o.length===0)return 0;if(o.length>1){const f=new C(o.map(l=>l.metadata),`모듈에는 표현식이 하나만 있어야 하는데 ${o.length}개가 있습니다.`,[]);throw new V(f)}const e=new tn([],[],a);let s=U(fn(o[0],e));s instanceof j&&(s=U(An(u,s)(u,n))),s instanceof x&&(s=await Fn(s,r));const[c]=w(u,[s],[g,q]);return c instanceof q?0:Number(c.value)}export{At as main,Ft as run};
